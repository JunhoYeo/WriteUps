import random, signal

def interrupted(signum, frame):
    print('TIMEOUT')
    exit(0)

def main():
    print('''
      ___           ___           ___           ___           ___           ___           ___
     /\__\         /\  \         /\  \         /\  \         /\  \         /\  \         /\__\\
    /::|  |       /::\  \       /::\  \       /::\  \       /::\  \        \:\  \       /:/  /
   /:|:|  |      /:/\:\  \     /:/\:\  \     /:/\:\  \     /:/\:\  \        \:\  \     /:/__/
  /:/|:|__|__   /::\~\:\  \   /::\~\:\  \   /::\~\:\  \   /::\~\:\  \       /::\  \   /::\  \ ___
 /:/ |::::\__\ /:/\:\ \:\__\ /:/\:\ \:\__\ /:/\:\ \:\__\ /:/\:\ \:\__\     /:/\:\__\ /:/\:\  /\__\\
 \/__/~~/:/  / \/__\:\/:/  / \/__\:\/:/  / \/__\:\/:/  / \/__\:\/:/  /    /:/  \/__/ \/__\:\/:/  /
       /:/  /       \::/  /       \::/  /       \::/  /       \::/  /    /:/  /           \::/  /
      /:/  /        /:/  /        /:/  /        /:/  /        /:/  /     \/__/            /:/  /
     /:/  /        /:/  /        /:/  /        /:/  /        /:/  /                      /:/  /
     \/__/         \/__/         \/__/         \/__/         \/__/                       \/__/
    ''')
    print('\n\nWelcome to MATH class. There are a total of 20 stages. 5 second time limit\n')
    for stage in range(1, 21):
        print(f'\n================== {stage:2} STAGE ==================')
        q = random.choice([
            '6+4', '2+4', '6*2', '3%9', '9*5', '92*39-6', '2%29+96', '88*61-74',
            '33*40-41', '17*72+98', '511%944-335-589', '627+584%594%656', '978*845+320+495',
            '256+36*883+442', '133-43+510-207', '6032*4568*3569%1067-7687', '43*21-21',
            '970*554+2379*2554+9993', '7511%3181+831-6501+6892', '10%7', '8%1', '6%8',
            '2020-1116%5388-2344*701', '4107*1068%9206%7553-619', '5-2', '3+1', '100+87%56',
            '100*38%29', '25*55-60', '69+43+44', '684*516*608+559', '72+4*708-715', 
            '210-79%738-926', '242+139%24+818', '138-743+797-923', '6754+5866%570-2547-1092',
            '79+8643%2821%5482%2123', '8561-9901-9408%4186+9553', '8296-8250-9136-4867+7523',
            '8980%2090+4157+1229-2152', '5-8'
        ])
        print(f'Question> {q} = ?')
        if not str(eval(q)) == input('ANSWER > '):
            print(f'Wrong! Correct answer was {eval(q)}.')
            exit(0)
        print('Correct!')
    print('\nCongratulation! The flag is dimi{Yeah, you are good at math!:)}\n')
    exit(0)

if __name__ == '__main__':
    signal.signal(signal.SIGALRM, interrupted)
    signal.alarm(5)
    main()
    signal.alarm(0)
